# LinearAlgebra_cuda é¡¹ç›®çŠ¶æ€

**æœ€åæ›´æ–°**ï¼š2025-10-13

## âœ… ç¼–è¯‘çŠ¶æ€

**ç¼–è¯‘æˆåŠŸï¼** é¡¹ç›®å·²æˆåŠŸæ„å»ºï¼Œå¯ä»¥ä½¿ç”¨ã€‚

```bash
cd /home/zzy/Plasma/gpu/LinearAlgebra_cuda
./build.sh
```

## ğŸ“Š æµ‹è¯•ç¨‹åºçŠ¶æ€

| åº“åç§° | çŠ¶æ€ | å¯æ‰§è¡Œæ–‡ä»¶ | è¯´æ˜ |
|--------|------|-----------|------|
| **AMGX** | âœ… å¯ç”¨ | `build/amgx_tests/amgx_poisson_solver` | å®Œå…¨å®ç°å¹¶æµ‹è¯• |
| **HYPRE** | âœ… å¯ç”¨ | `build/hypre_tests/hypre_poisson_solver` | å®Œå…¨å®ç°å¹¶æµ‹è¯• |
| **PETSc** | âœ… å¯ç”¨ | `build/petsc_tests/petsc_poisson_solver` | å®Œå…¨å®ç°å¹¶æµ‹è¯• |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### è¿è¡Œ AMGX æµ‹è¯•

```bash
cd /home/zzy/Plasma/gpu/LinearAlgebra_cuda/build
./amgx_tests/amgx_poisson_solver
```

**æµ‹è¯•å†…å®¹ï¼š**
- æ±‚è§£å™¨ï¼šPCG + AMG é¢„æ¡ä»¶å™¨
- ç½‘æ ¼è§„æ¨¡ï¼š64Ã—64, 128Ã—128, 256Ã—256, 512Ã—512
- è¾“å‡ºï¼š`../results/amgx_results.csv` å’Œ `amgx_results.json`

### è¿è¡Œ HYPRE æµ‹è¯•

```bash
cd /home/zzy/Plasma/gpu/LinearAlgebra_cuda/build
# å•è¿›ç¨‹
./hypre_tests/hypre_poisson_solver

# æˆ–ä½¿ç”¨ MPI å¤šè¿›ç¨‹
mpirun -np 2 ./hypre_tests/hypre_poisson_solver
```

**æµ‹è¯•å†…å®¹ï¼š**
- æ±‚è§£å™¨ï¼šPCG + BoomerAMG é¢„æ¡ä»¶å™¨
- ç½‘æ ¼è§„æ¨¡ï¼š64Ã—64, 128Ã—128, 256Ã—256, 512Ã—512
- è¾“å‡ºï¼š`../results/hypre_results.csv` å’Œ `hypre_results.json`

## ğŸ“ é¡¹ç›®ç»“æ„

```
LinearAlgebra_cuda/
â”œâ”€â”€ README.md              # è¯¦ç»†æ–‡æ¡£
â”œâ”€â”€ QUICKSTART.md          # å¿«é€Ÿå¼€å§‹æŒ‡å—
â”œâ”€â”€ STATUS.md              # æœ¬æ–‡ä»¶ - é¡¹ç›®çŠ¶æ€
â”œâ”€â”€ build.sh               # è‡ªåŠ¨æ„å»ºè„šæœ¬
â”œâ”€â”€ run_benchmarks.sh      # è‡ªåŠ¨è¿è¡Œè„šæœ¬
â”‚
â”œâ”€â”€ common/                # âœ… é€šç”¨å·¥å…·åº“ï¼ˆå·²å®Œæˆï¼‰
â”‚   â”œâ”€â”€ timer.h            # é«˜ç²¾åº¦è®¡æ—¶å™¨
â”‚   â”œâ”€â”€ matrix_generator.h # æµ‹è¯•çŸ©é˜µç”Ÿæˆå™¨
â”‚   â””â”€â”€ result_writer.h    # ç»“æœè¾“å‡ºå·¥å…·
â”‚
â”œâ”€â”€ amgx_tests/            # âœ… AMGX æµ‹è¯•ï¼ˆå·²å®Œæˆï¼‰
â”‚   â”œâ”€â”€ CMakeLists.txt
â”‚   â””â”€â”€ poisson_solver.cpp # 2D Poisson æ±‚è§£å™¨
â”‚
â”œâ”€â”€ hypre_tests/           # âœ… HYPRE æµ‹è¯•ï¼ˆå·²å®Œæˆï¼‰
â”‚   â”œâ”€â”€ CMakeLists.txt
â”‚   â””â”€â”€ poisson_solver.cpp # 2D Poisson æ±‚è§£å™¨
â”‚
â”œâ”€â”€ petsc_tests/           # âœ… PETSc æµ‹è¯•ï¼ˆå·²å®Œæˆï¼‰
â”‚   â”œâ”€â”€ CMakeLists.txt
â”‚   â””â”€â”€ poisson_solver.cpp # 2D Poisson æ±‚è§£å™¨
â”‚
â”œâ”€â”€ build/                 # æ„å»ºç›®å½•
â””â”€â”€ results/               # ç»“æœè¾“å‡ºç›®å½•
```

## ğŸ”§ æŠ€æœ¯ç»†èŠ‚

### AMGX é…ç½®
- æ±‚è§£å™¨ï¼šPCGï¼ˆé¢„æ¡ä»¶å…±è½­æ¢¯åº¦æ³•ï¼‰
- é¢„æ¡ä»¶å™¨ï¼šAMGï¼ˆä»£æ•°å¤šé‡ç½‘æ ¼ï¼‰
- èšåˆç­–ç•¥ï¼šAGGREGATION
- å¹³æ»‘å™¨ï¼šBLOCK_JACOBI
- æ”¶æ•›å®¹å·®ï¼š1e-6
- æœ€å¤§è¿­ä»£æ¬¡æ•°ï¼š1000

### HYPRE é…ç½®
- æ±‚è§£å™¨ï¼šParCSR PCG
- é¢„æ¡ä»¶å™¨ï¼šBoomerAMG
- ç²—åŒ–ç­–ç•¥ï¼šFalgout coarsening (type 6)
- æ¾å¼›æ–¹æ³•ï¼šSymmetric Gauss-Seidel (type 6)
- æ”¶æ•›å®¹å·®ï¼š1e-6
- æœ€å¤§è¿­ä»£æ¬¡æ•°ï¼š1000

## âœ… é—®é¢˜å·²è§£å†³

### PETSc MPI ç‰ˆæœ¬å†²çª - å·²è§£å†³

**è§£å†³æ–¹æ¡ˆ**ï¼šé‡æ–°ç¼–è¯‘ PETSc å¹¶å®‰è£…åˆ°ç‹¬ç«‹ç›®å½•

æ–°ç¼–è¯‘çš„ PETSc ä½äºï¼š`/home/zzy/Plasma/gpu/petsc-gpu/install`

é…ç½®è¯¦æƒ…ï¼š
- CUDA æ”¯æŒï¼šå·²å¯ç”¨ (CUDA 12.6)
- MPI æ”¯æŒï¼šOpenMPI 4.0.3
- GPU æ¶æ„ï¼š70, 75, 80, 86, 89, 90
- ä¼˜åŒ–çº§åˆ«ï¼š-O3 -march=native
- å®‰è£…æ–¹å¼ï¼šç‹¬ç«‹å®‰è£…ï¼Œé¿å…ç‰ˆæœ¬å†²çª

## ğŸ“ˆ æ€§èƒ½æµ‹è¯•ç»“æœ

æµ‹è¯•ç»“æœä¼šè‡ªåŠ¨ä¿å­˜åœ¨ `results/` ç›®å½•ï¼š

- **CSV æ ¼å¼**ï¼šä¾¿äºåœ¨ Excel æˆ– Pandas ä¸­åˆ†æ
- **JSON æ ¼å¼**ï¼šä¾¿äºç¨‹åºåŒ–å¤„ç†

### ç»“æœå­—æ®µ

| å­—æ®µ | è¯´æ˜ |
|------|------|
| Library | åº“åç§°ï¼ˆAMGX/HYPRE/PETScï¼‰ |
| Test | æµ‹è¯•åç§° |
| ProblemSize | é—®é¢˜è§„æ¨¡ï¼ˆçŸ©é˜µç»´åº¦ï¼‰ |
| SetupTime | Setup æ—¶é—´ï¼ˆç§’ï¼‰ |
| SolveTime | æ±‚è§£æ—¶é—´ï¼ˆç§’ï¼‰ |
| TotalTime | æ€»æ—¶é—´ï¼ˆç§’ï¼‰ |
| Iterations | è¿­ä»£æ¬¡æ•° |
| Residual | æœ€ç»ˆæ®‹å·® |

## ğŸ¯ ä¸‹ä¸€æ­¥è®¡åˆ’

- [x] âœ… å®Œæˆ AMGX å®ç°å’Œæµ‹è¯•
- [x] âœ… å®Œæˆ HYPRE å®ç°å’Œæµ‹è¯•
- [x] âœ… è§£å†³ PETSc MPI ç‰ˆæœ¬å†²çªï¼ˆé‡æ–°ç¼–è¯‘ï¼‰
- [x] âœ… å®Œæˆ PETSc å®ç°å’Œæµ‹è¯•
- [ ] ğŸ“Š æ·»åŠ  3D Poisson é—®é¢˜æµ‹è¯•
- [ ] âš¡ æ·»åŠ å¤š GPU å¯æ‰©å±•æ€§æµ‹è¯•
- [ ] ğŸ“‰ æ·»åŠ ä¸åŒé¢„æ¡ä»¶å™¨æ¯”è¾ƒ
- [ ] ğŸ“Š ç”Ÿæˆæ€§èƒ½æ¯”è¾ƒå›¾è¡¨
- [ ] ğŸ“ æ·»åŠ è¯¦ç»†æ€§èƒ½åˆ†ææŠ¥å‘Š

## ğŸ› ï¸ è‡ªå®šä¹‰æµ‹è¯•

### ä¿®æ”¹æµ‹è¯•è§„æ¨¡

ç¼–è¾‘ `amgx_tests/poisson_solver.cpp` æˆ– `hypre_tests/poisson_solver.cpp`ï¼š

```cpp
// æ‰¾åˆ°è¿™ä¸€è¡Œ
std::vector<int> grid_sizes = {64, 128, 256, 512};

// ä¿®æ”¹ä¸ºä½ æƒ³è¦çš„è§„æ¨¡
std::vector<int> grid_sizes = {32, 64, 128, 256, 512, 1024, 2048};
```

### ä¿®æ”¹æ±‚è§£å™¨å‚æ•°

AMGXï¼šç¼–è¾‘ `amgx_tests/poisson_solver.cpp` ä¸­çš„ `config_string`

HYPREï¼šç¼–è¾‘ `hypre_tests/poisson_solver.cpp` ä¸­çš„æ±‚è§£å™¨è®¾ç½®ä»£ç 

## ğŸ“ æ”¯æŒ

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. CUDA ç‰ˆæœ¬ï¼š12.6+
2. GPU é©±åŠ¨æ­£å¸¸
3. è¶³å¤Ÿçš„ GPU å†…å­˜
4. åº“è·¯å¾„æ­£ç¡®é…ç½®

---

**é¡¹ç›®åˆ›å»º**ï¼š2025-10-13
**æœ€åæˆåŠŸæ„å»º**ï¼š2025-10-13

